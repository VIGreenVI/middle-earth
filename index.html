<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Middle-earth</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@600&display=swap');
  body, html {
    margin: 0; padding: 0; overflow: hidden; height: 100%;
    font-family: 'Cinzel', serif;
    background: #000;
    color: #8effa3;
  }
  #container {
    position: relative;
    width: 100vw; height: 100vh;
  }
  canvas {
    display: block;
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    z-index: -1;
  }
  #menu, #page {
    position: absolute;
    top: 15vh;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
    color: #8effa3;
    text-shadow: 0 0 12px #4c1d95;
  }
  #menu h1 {
    font-size: 3.5rem;
    margin-bottom: 1rem;
    user-select: none;
  }
  .btn {
    background: linear-gradient(45deg, #14532d, #4c1d95);
    border: 2px solid #8effa3;
    color: #e0e0ff;
    padding: 1rem 2rem;
    margin: 0.7rem;
    font-size: 1.3rem;
    cursor: pointer;
    border-radius: 12px;
    box-shadow: 0 0 15px #8a2be2;
    user-select: none;
    transition: all 0.3s ease;
  }
  .btn:hover {
    background: #022c22;
    color: #9f44ff;
    box-shadow: 0 0 25px #22d3ee;
  }
  #page {
    display: none;
    width: 90vw;
    max-width: 600px;
  }
  #page h2 {
    margin-bottom: 1rem;
    font-size: 2.5rem;
  }
  #backBtn {
    margin-top: 2rem;
    padding: 0.7rem 1.5rem;
    font-size: 1rem;
    border: 2px solid #9f44ff;
    background: transparent;
    color: #9f44ff;
    border-radius: 8px;
    cursor: pointer;
    user-select: none;
    transition: background 0.3s ease, color 0.3s ease;
  }
  #backBtn:hover {
    background-color: #4c1d95;
    color: #fff;
  }
  #passwordOutput {
    margin-top: 1rem;
    font-size: 1.2rem;
    word-break: break-all;
    background: rgba(20, 83, 45, 0.3);
    padding: 1rem;
    border-radius: 8px;
    user-select: all;
  }
  #generateBtn {
    margin-top: 1rem;
  }
</style>
</head>
<body>
<div id="container">
  <div id="menu">
    <h1>Middle-earth</h1>
    <button class="btn" onclick="showPage('password')">Password Generator</button><br />
    <button class="btn" onclick="showPage('nick')">Fantasy Name Generator</button><br />
    <button class="btn" onclick="showPage('decorator')">Nickname Decorator</button>
  </div>
  <div id="page">
    <h2 id="pageTitle"></h2>
    <div id="pageContent"></div>
    <button id="backBtn" onclick="goBack()">‚Üê Back to Main Menu</button>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/controls/OrbitControls.min.js"></script>
<script>
// Page control
const menu = document.getElementById('menu');
const page = document.getElementById('page');
const pageTitle = document.getElementById('pageTitle');
const pageContent = document.getElementById('pageContent');

function showPage(type) {
  menu.style.display = 'none';
  page.style.display = 'block';
  pageContent.innerHTML = ''; // clear
  switch(type) {
    case 'password': showPasswordGenerator(); break;
    case 'nick': showNickGenerator(); break;
    case 'decorator': showDecorator(); break;
  }
}

function goBack() {
  page.style.display = 'none';
  menu.style.display = 'block';
}

// Password Generator
function generatePassword(length = 16) {
  const chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()-_=+[]{}|;:',.<>?/";
  let pwd = "";
  for(let i=0; i < length; i++) {
    pwd += chars.charAt(Math.floor(Math.random() * chars.length));
  }
  return pwd;
}

function showPasswordGenerator() {
  pageTitle.textContent = "Password Generator";
  const btn = document.createElement('button');
  btn.className = 'btn';
  btn.textContent = "Generate Password";
  btn.id = 'generateBtn';

  const output = document.createElement('div');
  output.id = 'passwordOutput';
  output.title = "Click to copy password";

  btn.onclick = () => {
    const pwd = generatePassword();
    output.textContent = pwd;
    navigator.clipboard.writeText(pwd).then(() => {
      output.style.background = "rgba(50, 150, 50, 0.4)";
      setTimeout(() => output.style.background = "rgba(20, 83, 45, 0.3)", 700);
    });
  };

  output.onclick = () => {
    if(output.textContent) {
      navigator.clipboard.writeText(output.textContent);
      output.style.background = "rgba(50, 150, 50, 0.6)";
      setTimeout(() => output.style.background = "rgba(20, 83, 45, 0.3)", 700);
    }
  };

  pageContent.appendChild(btn);
  pageContent.appendChild(output);
}

// Placeholder for fantasy nick generator
function showNickGenerator() {
  pageTitle.textContent = "Fantasy Name Generator";
  pageContent.innerHTML = `<p>Coming soon: generate dark fantasy names of elves, knights and mages...</p>`;
}

// Placeholder for nickname decorator
function showDecorator() {
  pageTitle.textContent = "Nickname Decorator";
  pageContent.innerHTML = `<p>Coming soon: decorate your nickname with magical symbols and effects...</p>`;
}

// Three.js cosmic nebula background
let scene, camera, renderer, stars = [];

function init() {
  scene = new THREE.Scene();

  camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  camera.position.z = 30;

  renderer = new THREE.WebGLRenderer({antialias: true});
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);
  renderer.domElement.style.position = 'fixed';
  renderer.domElement.style.top = 0;
  renderer.domElement.style.left = 0;
  renderer.domElement.style.zIndex = -1;

  // Stars - points with glow
  const starGeometry = new THREE.BufferGeometry();
  const starCount = 800;
  const positions = new Float32Array(starCount * 3);

  for(let i = 0; i < starCount; i++) {
    positions[i*3] = (Math.random() - 0.5) * 200;
    positions[i*3 + 1] = (Math.random() - 0.5) * 200;
    positions[i*3 + 2] = (Math.random() - 0.5) * 200;
  }

  starGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));

  const starMaterial = new THREE.PointsMaterial({
    color: 0x8effa3,
    size: 0.7,
    transparent: true,
    opacity: 0.8,
    blending: THREE.AdditiveBlending,
  });

  stars = new THREE.Points(starGeometry, starMaterial);
  scene.add(stars);

  // Create subtle colorful fog effect with large sprite textures
  const spriteMap = new THREE.TextureLoader().load('https://cdn.pixabay.com/photo/2016/03/31/19/56/smoke-1294211_1280.png');
  const spriteMaterial = new THREE.SpriteMaterial({
    map: spriteMap,
    color: 0x4c1d95,
    opacity: 0.08,
    transparent: true,
    blending: THREE.AdditiveBlending,
  });

  for(let i = 0; i < 30; i++) {
    let sprite = new THREE.Sprite(spriteMaterial);
    sprite.position.set(
      (Math.random() - 0.5) * 150,
      (Math.random() - 0.5) * 150,
      (Math.random() - 0.5) * 150
    );
    let scale = Math.random() * 20 + 15;
    sprite.scale.set(scale, scale, 1);
    scene.add(sprite);
  }

  window.addEventListener('resize', onWindowResize, false);
  document.addEventListener('mousemove', onMouseMove, false);
}

let mouseX = 0, mouseY = 0;
function onMouseMove(event) {
  mouseX = (event.clientX / window.innerWidth) * 2 - 1;
  mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
}

function onWindowResize() {
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
}

function animate() {
  requestAnimationFrame(animate);

  // Slowly rotate stars field and apply mouse interaction for parallax effect
  stars.rotation.y += 0.0008;
  stars.rotation.x += 0.0004;
  stars.position.x += (mouseX * 3 - stars.position.x) * 0.05;
  stars.position.y += (mouseY * 3 - stars.position.y) * 0.05;

  renderer.render(scene, camera);
}

init();
animate();
</script>
</body>
</html>
